###[Java（web）项目安全漏洞及解决方式](https://blog.csdn.net/s1547823103/article/details/80297006)

###什么是 XSS 攻击
- XSS原称为CSS(Cross-Site Scripting)，因为和层叠样式表(Cascading Style Sheets)重名，
所以改称为XSS(X一般有未知的含义，还有扩展的含义)。
- XSS攻击涉及到三方：攻击者，用户，web server。
- 用户是通过浏览器来访问web server上的网页，
- XSS攻击就是攻击者通过各种办法，在用户访问的网页中插入自己的脚本，
让其在用户访问网页时在其浏览器中进行执行。攻击者通过插入的脚本的执行，
来获得用户的信息，比如cookie，发送到攻击者自己的网站(跨站了)。
所以称为跨站脚本攻击。
- XSS可以分为反射型XSS和持久性XSS，还有DOM Based XSS。
- 一句话，XSS就是在用户的浏览器中执行攻击者自己定制的脚本。

- 1.1 反射型XSS
  
  反射性XSS，也就是非持久性XSS。用户点击攻击链接，服务器解析后响应，在返回的响应内容中出现攻击者的XSS代码，被浏览器执行。一来一去，XSS攻击脚本被web server反射回来给浏览器执行，所以称为反射型XSS。
  
  特点：
  
  1> XSS攻击代码非持久性，也就是没有保存在web server中，而是出现在URL地址中；
  
  2> 非持久性，那么攻击方式就不同了。一般是攻击者通过邮件，聊天软件等等方式发送攻击URL，然后用户点击来达到攻击的；
  
  1.2 持久型XSS
  
  区别就是XSS恶意代码存储在web server中，这样，每一个访问特定网页的用户，都会被攻击。
  
  特点：
  
  1> XSS攻击代码存储于web server上；
  
  2> 攻击者，一般是通过网站的留言、评论、博客、日志等等功能(所有能够向web server输入内容的地方)，将攻击代码存储到web server上的；
  
  有时持久性XSS和反射型XSS是同时使用的，比如先通过对一个攻击url进行编码(来绕过xss filter)，然后提交该web server(存储在web server中), 然后用户在浏览页面时，如果点击该url，就会触发一个XSS攻击。当然用户点击该url时，也可能会触发一个CSRF(Cross site request forgery)攻击。
  
  1.3 DOM based XSS
  
  基于DOM的XSS，也就是web server不参与，仅仅涉及到浏览器的XSS。比如根据用户的输入来动态构造一个DOM节点，如果没有对用户的输入进行过滤，那么也就导致XSS攻击的产生。过滤可以考虑采用esapi4js。
  
###XSS 攻击的防御
   
   XSS防御的总体思路是：对输入(和URL参数)进行过滤，对输出进行编码。
   
   - 使用Jsoup框架对用户输入字符串左XSS过滤
   
   - 使用Spring框架提供的HtmlUtils
   
   也就是对提交的所有内容进行过滤，对url中的参数进行过滤，过滤掉会导致脚本执行的相关内容；然后对动态输出到页面的内容进行html编码，使脚本无法在浏览器中执行。虽然对输入过滤可以被绕过，但是也还是会拦截很大一部分的XSS攻击。
   
  



