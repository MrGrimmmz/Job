###Nginx

####请解释一下什么是Nginx?
Nginx是一个web服务器和反向代理服务器，用于HTTP、HTTPS、SMTP、POP3和IMAP协议。

####请列举Nginx的一些特性？
1. 反向代理/L7负载均衡器 

2. 嵌入式Perl解释器 

3. 动态二进制升级 

4. 可用于重新编写URL，具有非常好的PCRE支持

####nginx和apache的区别
1. 轻量级，同样是web 服务，比apache占用更少的内存及资源

2. 抗并发，nginx 处理请求是异步非阻塞的，而apache 则是阻塞型的，在高并发下nginx 能保持低资源低消耗高性能

3. 高度模块化的设计，编写模块相对简单 

4. 最核心的区别在于apache是同步多进程模型，一个连接对应一个进程；nginx是异步的，多个连接（万级别）可以对应一个进程

####nginx是如何实现高并发的
一个主进程，多个工作进程，每个工作进程可以处理多个请求，每进来一个request，会有一个worker进程去处理。但不是全程的处理，处理到可能发生阻塞的地方，比如向上游（后端）服务器转发request，并等待请求返回。那么，这个处理的worker继续处理其他请求，而一旦上游服务器返回了，就会触发这个事件，worker才会来接手，这个request才会接着往下走。

####请解释Nginx如何处理HTTP请求
Nginx使用反应器模式。主事件循环等待操作系统发出准备事件的信号，这样数据就可以从套接字读取，在该实例中读取到缓冲区并进行处理。单个线程可以提供数万个并发连接

####nginx的作用
- 真实的服务器不能直接被外部网络访问,想要访问必须通过代理，防止主服务器被恶意攻击

- 负载均衡
    - 配置语法：upstream name {.......}
    - 调度算法
        - 轮询：按时间顺序逐一分配到不同的后端服务器。
        - 加权轮询：可在配置的server后面加个weight=number，number值越高，分配的概率越大。
        - ip_hash：每个请求按访问IP的hash分配，这样来自同一IP固定访问一个后台服务器。
        - least_hash：最少链接数，哪个机器连接数少就发分发给哪个机器。
        - url_hash：按访问的url的hash结果分配请求，是每个url定向到同一后端服务器上。
        - hash关键值：hash自定义的key。
        - 注：调度算法在设置upstream中配置，例如在此大括号里面写入ip_hash表示使用ip_hash的方式分配
        
- 动静分离
- 缓冲
    - nginx也提供了缓冲的机制，用于提高性能。没有缓冲的情况下，数据直接从后端服务器发送给客户端。缓冲的作用是在nginx上临时存储来自后端服务器的处理结果，从而可以提早关闭nginx到后端的连接，减少IO的损耗。一般内容存放在内存当中，但当内容过多，造成的内存不够时，会把内容存放在临时文件目录下。
    
###一致性哈希
一致性哈希可以有效地解决分布式存储结构下动态增加和删除节点所带来的问题