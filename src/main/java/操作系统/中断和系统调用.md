###中断
所谓的中断就是在计算机执行程序的过程中，由于出现了某些特殊事情，使得CPU暂停对程序的执行，转而去执行处理这一事件的程序。等这些特殊事情处理完之后再回去执行之前的程序。

- 中断一般分为三类：
    - 由计算机硬件异常或故障引起的中断，称为内部异常中断； 
    - 由程序中执行了引起中断的指令而造成的中断，称为软中断（这也是和我们将要说明的系统调用相关的中断）； 
    - 由外部设备请求引起的中断，称为外部中断。
    
- 简单来说，对中断的理解就是对一些特殊事情的处理。

- 与中断紧密相连的一个概念就是中断处理程序了。当中断发生的时候，系统需要去对中断进行处理，对这些中断的处理是由操作系统内核中的特定函数进行的，这些处理中断的特定的函数就是我们所说的中断处理程序了。
      
- 另一个与中断紧密相连的概念就是中断的优先级。中断的优先级说明的是当一个中断正在被处理的时候，处理器能接受的中断的级别。中断的优先级也表明了中断需要被处理的紧急程度。每个中断都有一个对应的优先级，当处理器在处理某一中断的时候，只有比这个中断优先级高的中断可以被处理器接受并且被处理。优先级比这个当前正在被处理的中断优先级要低的中断将会被忽略。

- 典型的中断优先级如下所示：
  
  机器错误 > 时钟 > 磁盘 > 网络设备 > 终端 > 软件中断 
  当发生软件中断时，其他所有的中断都可能发生并被处理；但当发生磁盘中断时，就只有时钟中断和机器错误中断能被处理了。

###系统调用
- 进程的执行在系统上的两个级别：用户级和核心级，也称为用户态和系统态
- 程序的执行一般是在用户态下执行的，但当程序需要使用操作系统提供的服务时，比如说打开某一设备、创建文件、读写文件等，就需要向操作系统发出调用服务的请求，这就是系统调用。
- 系统调用和中断的关系就在于，当进程发出系统调用申请的时候，会产生一个软件中断。产生这个软件中断以后，系统会去对这个软中断进行处理，这个时候进程就处于核心态了。
- 用户态的进程能存取它们自己的指令和数据，但不能存取内核指令和数据（或其他进程的指令和数据）。然而，核心态下的进程能够存取内核和用户地址      

###同步与异步
- 同步与异步，重点在于消息通知的方式;
- 阻塞与非阻塞，重点在于等消息时候的行为。

    - 同步阻塞：小明在柜台干等着拿奶茶；
    - 同步非阻塞：小明在柜台边刷微博边等着拿奶茶；
    - 异步阻塞：小明拿着小票啥都不干，一直等着店员通知他拿奶茶；
    - 异步非阻塞：小明拿着小票，刷着微博，等着店员通知他拿奶茶。
    
###I/O多路复用
所谓的I/O复用，就是多个I/O可以复用一个进程。

I/O multiplexing 这里面的 multiplexing 指的其实是在单个线程通过记录跟踪每一个Sock(I/O流)的状态来同时管理多个I/O流. 

发明它的原因，是尽量多的提高服务器的吞吐能力。

###epoll IO多路复用
- 当连接有I/O流事件产生的时候，epoll就会去告诉进程哪个连接有I/O流事件产生，然后进程就去处理这个进程。如此，多高效！
- epoll 可以说是I/O 多路复用最新的一个实现，epoll 修复了poll 和select绝大部分问题, 比如：
     - epoll 现在是线程安全的。 
     - epoll 现在不仅告诉你sock组里面数据，还会告诉你具体哪个sock有数据，你不用自己去找了。
      
- epoll 有个致命的缺点，只有linux支持。

###epoll和select/poll区别
- epoll内部使用了mmap共享了用户和内核的部分空间，避免了数据的来回拷贝
- epoll基于事件驱动，epoll_ctl注册事件并注册callback回调函数，epoll_wait只返回发生的事件避免了像select和poll对事件的整个轮寻操作。

###Nginx 异步，非阻塞，IO多路复用
Nginx 这样出众，正是他采用了异步，非阻塞，IO多路复用。

Nginx之前是单进程的。1个master进程，2个work进程。

每进来一个request，会有一个worker进程去处理。但不是全程的处理，处理到什么程度呢？处理到可能发生阻塞的地方，比如向上游（后端）服务器转发request，并等待请求返回。那么，这个处理的worker不会这么傻等着，他会在发送完请求后，注册一个事件：“如果upstream返回了，告诉我一声，我再接着干”。于是他就休息去了。这就是异步。此时，如果再有request 进来，他就可以很快再按这种方式处理。这就是非阻塞和IO多路复用。而一旦上游服务器返回了，就会触发这个事件，worker才会来接手，这个request才会接着往下走。这就是异步回调。